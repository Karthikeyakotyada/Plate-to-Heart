<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register - Plate to Heart</title>

  <style>
    :root{
      --bg-dark:#07141a;
      --glass:rgba(255,255,255,0.04);
      --accent1:#00e0c0;
      --accent2:#009688;
      --gold:#ffd08a;
      --text:#e6eef3;
      --muted:#a3b0ba;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:
        linear-gradient(180deg,rgba(2,6,23,0.7) 0%,rgba(3,10,16,0.8) 100%),
        radial-gradient(900px 500px at 10% 15%,rgba(0,224,192,0.08),transparent 10%),
        radial-gradient(700px 400px at 80% 90%,rgba(0,150,136,0.05),transparent 10%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow-y:auto;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><filter id='n'><feTurbulence baseFrequency='0.9'/><feColorMatrix type='saturate' values='0'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.03' fill='%23212121'/></svg>");
      background-size:cover;
      filter:blur(18px) saturate(0.9) contrast(1);
      pointer-events:none;
      z-index:0;
    }

    .wrap{width:100%;max-width:440px;z-index:10;animation:fadeIn .45s cubic-bezier(.2,.9,.3,1)}
    @keyframes fadeIn{from{opacity:0;transform:translateY(12px) scale(.99)}to{opacity:1;transform:none}}

    .card{
      background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04);
      border-radius:16px;
      padding:28px;
      box-shadow:0 18px 60px rgba(2,6,23,0.6);
      backdrop-filter:blur(8px) saturate(1.1);
    }

    .logo{display:flex;align-items:center;gap:12px;margin-bottom:16px}
    .logo .mark{
      width:56px;height:56px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,var(--gold),rgba(255,210,138,0.8));
      box-shadow:0 8px 30px rgba(0,0,0,0.45);
      font-size:26px;
    }
    .logo .title{font-weight:800;font-size:18px;color:var(--text)}
    .logo .subtitle{font-size:12px;color:var(--muted);font-weight:600;margin-top:4px}

    h1{font-size:20px;margin:0 0 4px;font-weight:800}
    p.desc{margin:0 0 18px;color:var(--muted);font-size:14px}

    .form-group{margin-bottom:14px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px;font-weight:700}
    input,select{
      width:100%;padding:12px 14px;
      border-radius:10px;border:1px solid rgba(255,255,255,0.04);
      background:rgba(255,255,255,0.02);color:var(--text);
      font-size:15px;transition:box-shadow .18s,border-color .18s,transform .12s;
    }
    input:focus,select:focus{
      outline:none;border-color:rgba(0,224,192,0.9);
      box-shadow:0 6px 20px rgba(0,224,192,0.08),0 0 0 6px rgba(0,224,192,0.03);
      transform:translateY(-1px);
    }
    input::placeholder{color:rgba(230,238,243,0.45)}

    .password-wrapper{position:relative;display:flex;align-items:center}
    .password-toggle{
      position:absolute;right:8px;top:50%;transform:translateY(-50%);
      background:transparent;border:none;color:var(--muted);cursor:pointer;
      font-size:18px;padding:6px;border-radius:8px;
    }
    .password-toggle:hover{color:var(--accent1)}

    .error{
      display:none;margin:10px 0;padding:10px 12px;border-radius:10px;
      background:rgba(239,68,68,0.08);color:#ffb4b4;
      border-left:4px solid rgba(239,68,68,0.9);font-size:13px;
    }

    .btn{
      width:100%;padding:13px 14px;border:none;border-radius:10px;
      font-weight:800;font-size:15px;cursor:pointer;margin-top:6px;
      transition:transform .12s ease,box-shadow .12s ease;
    }
    .btn.primary{
      background:linear-gradient(90deg,var(--accent1),var(--accent2));
      color:#041014;
      box-shadow:0 10px 30px rgba(0,150,136,0.15);
    }
    .btn.primary:hover{transform:translateY(-3px);box-shadow:0 16px 36px rgba(0,150,136,0.2)}

    .footer{
      text-align:center;margin-top:16px;font-size:13px;color:var(--muted);
    }
    .footer a{color:var(--accent1);text-decoration:none;font-weight:800}
    .footer a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="logo">
        <div class="mark">üçΩ</div>
        <div>
          <div class="title">Plate to Heart</div>
          <div class="subtitle">Join the Movement</div>
        </div>
      </div>

      <h1>Create Account</h1>
      <p class="desc">Register now to start donating or volunteering.</p>

      <form id="registerForm">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input id="name" type="text" required placeholder="Your full name" />
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input id="email" type="email" required placeholder="you@domain.com" />
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <div class="password-wrapper">
            <input id="password" type="password" required placeholder="Create password" />
            <button type="button" class="password-toggle" onclick="togglePassword('password')">üëÅÔ∏è</button>
          </div>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <div class="password-wrapper">
            <input id="confirmPassword" type="password" required placeholder="Re-enter password" />
            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">üëÅÔ∏è</button>
          </div>
        </div>
        <div class="form-group">
          <label for="userType">Register as</label>
          <select id="userType" required>
            <option value="donor">Donor (Hotel/Hostel)</option>
            <option value="volunteer">Volunteer</option>
          </select>
        </div>

        <div id="errorMessage" class="error"></div>

        <button type="submit" class="btn primary">Register</button>
      </form>

      <div class="footer">
        Already have an account? <a href="login-new.html">Login here</a>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, updateProfile }
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, setDoc }
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCayftL5J0J8tU227qDL1cguBTkfXtj4Fg",
      authDomain: "plate-to-heart-30bd2.firebaseapp.com",
      projectId: "plate-to-heart-30bd2",
      storageBucket: "plate-to-heart-30bd2.appspot.com",
      messagingSenderId: "940060297380",
      appId: "1:940060297380:web:fca392b7dd3da5dce27e31",
      measurementId: "G-K6Q9KHRZYC"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      const userType = document.getElementById('userType').value;
      const errorDiv = document.getElementById('errorMessage');

      if (password !== confirmPassword) {
        errorDiv.style.display = 'block';
        errorDiv.textContent = 'Passwords do not match';
        return;
      }

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;
        await updateProfile(user, { displayName: name });

        await setDoc(doc(db, "users", user.uid), {
          name, email, userType, createdAt: new Date().toISOString()
        });

        window.location.href = "login-new.html";
      } catch (error) {
        errorDiv.style.display = 'block';
        errorDiv.textContent = error.message;
      }
    });

    window.togglePassword = function(id){
      const input=document.getElementById(id);
      const toggle=input.nextElementSibling;
      if(input.type==='password'){input.type='text';toggle.textContent='üôà'}
      else{input.type='password';toggle.textContent='üëÅÔ∏è'}
    }
  </script>
</body>
</html>
